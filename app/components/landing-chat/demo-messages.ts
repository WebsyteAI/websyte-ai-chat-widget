import type { Message } from "@/components/ChatWidget/types";

// Helper to create messages
function createMessage(role: "user" | "assistant", content: string): Omit<Message, "id" | "timestamp"> {
  return { role, content };
}

// Predefined demo messages for various queries
export const demoMessages = {
  welcome: createMessage(
    "assistant",
    `# Turn Every Page Into an Interactive Conversation

Your readers get instant answers, you get better engagement, all with one line of code that won't break your design.

‚ú® **Free to install** instantly ‚Äî no signup required

## Why Your Visitors Will Actually Stay and Engage

Stop watching analytics show high bounce rates. Give visitors the smart, instant help they're desperately looking for.

### Key Features:
- **Context-Aware AI** - Understands page content and provides intelligent, relevant responses based on your article or webpage
- **One-Click Summarization** - Instantly generate concise summaries of any page content with AI-powered analysis
- **Flexible Injection** - Choose between fixed overlay or inject into specific DOM elements for seamless integration
- **Shadow DOM Isolation** - Complete style isolation prevents conflicts with your existing website design and CSS
- **Easy Integration** - Single script tag implementation with no external dependencies or complex setup required
- **Customizable Branding** - Configure advertiser name, logo, positioning, and theme to match your brand identity

## Ready to Get Started? It's This Simple

Copy this one line of code and paste it anywhere on your website:

\`\`\`html
<script src="https://websyte.ai/dist/widget.js" async></script>
\`\`\`

‚ú® **Free to install** instantly ‚Äî no signup required

## Built for Performance & Security

Enterprise-grade infrastructure with modern web standards:

- **Lightning Fast**: ~200KB bundle size, <100ms load time
- **Secure & Reliable**: Cloudflare Workers, CORS Protection, API Key Security, Rate Limiting
- **Universal Compatibility**: Works with any CMS, mobile responsive, Shadow DOM isolation

---

üí¨ **Have questions?** I can help you with:
- üöÄ "How do I get started?" - Installation instructions
- üõ†Ô∏è "Tell me about features" - Explore our capabilities
- üìä "Show me examples" - See it in action
- ü§î "How does it work?" - Technical details`
  ),

  features: createMessage(
    "assistant",
    `## Why Your Visitors Will Actually Stay and Engage

Stop watching analytics show high bounce rates. Give visitors the smart, instant help they're desperately looking for.

### Core Features:

**Context-Aware AI** üß†
Understands page content and provides intelligent, relevant responses based on your article or webpage.

**One-Click Summarization** ‚ö°
Instantly generate concise summaries of any page content with AI-powered analysis.

**Flexible Injection** üéØ
Choose between fixed overlay or inject into specific DOM elements for seamless integration.

**Shadow DOM Isolation** üõ°Ô∏è
Complete style isolation prevents conflicts with your existing website design and CSS.

**Easy Integration** üíª
Single script tag implementation with no external dependencies or complex setup required.

**Customizable Branding** üé®
Configure advertiser name, logo, positioning, and theme to match your brand identity.

**Want to learn more?**
- üöÄ Ask "how to get started" for installation
- üõ†Ô∏è Ask "technical details" for performance specs
- üìä Ask "pricing" to confirm it's free
- ü§î Ask "how it works" for the technical explanation`
  ),

  getStarted: createMessage(
    "assistant",
    `## Ready to Get Started? It's This Simple

Copy this one line of code and paste it anywhere on your website:

\`\`\`html
<script src="https://websyte.ai/dist/widget.js" async></script>
\`\`\`

‚ú® **Free to install** instantly ‚Äî no signup required

### One Line Setup
Paste this anywhere in your HTML and you're done!

**That's it!** Your AI assistant will:
- Automatically read your page content
- Provide instant, contextual answers to visitors
- Work perfectly with your existing design
- Never conflict with your CSS or JavaScript

### Platform-Specific Instructions:

**WordPress**: Install 'Insert Headers and Footers' plugin ‚Üí Add script to footer ‚Üí Save
**Shopify**: Online Store ‚Üí Themes ‚Üí Edit code ‚Üí Add before </body> in theme.liquid
**Wix**: Open Wix Editor ‚Üí Add HTML embed ‚Üí Paste script
**Static Sites**: Add script before closing </body> tag ‚Üí Deploy

**Need help?** Tell me your platform and I'll guide you through it!`
  ),

  demo: createMessage(
    "assistant",
    `## See Websyte AI in Action üé¨

Watch how easy it is to add AI-powered conversations to any website:

{{component:video-demo}}

**What you just saw:**
- Real visitor interactions
- Instant, contextual responses
- Zero impact on page design
- Happy, engaged users

Want to try it yourself? Ask me "How do I get started?"`
  ),

  pricing: createMessage(
    "assistant",
    `## Yes, It's Really Free! üéâ

### Websyte AI is completely free forever:
- ‚úÖ **No credit card required**
- ‚úÖ **No trial periods**
- ‚úÖ **No hidden fees**
- ‚úÖ **No user limits**
- ‚úÖ **No page view limits**
- ‚úÖ **Full features included**

### Why Free?
We believe every website should have AI-powered engagement. Our mission is to democratize AI chat for the web.

### How We Stay Free:
- Built on efficient edge computing (Cloudflare Workers)
- Optimized AI usage with caching
- Open source community contributions
- Optional enterprise support (coming soon)

### No Catch, Just Great AI:
- Instant setup with one line of code
- Works on unlimited websites
- No branding or "Powered by" badges
- Your data stays yours

**Ready to join thousands of sites using Websyte AI?**
\`\`\`html
<script src="https://websyte.ai/dist/widget.js" async></script>
\`\`\`

‚ú® Copy, paste, done - forever free!`
  ),

  technical: createMessage(
    "assistant",
    `## Built for Performance & Security

Enterprise-grade infrastructure with modern web standards.

### Lightning Fast ‚ö°
- **~200KB** Bundle size
- **<100ms** Load time
- Async loading doesn't block your page
- Optimized for Core Web Vitals

### Secure & Reliable üõ°Ô∏è
- **Cloudflare Workers** for edge computing
- **CORS Protection** built-in
- **API Key Security** for your data
- **Rate Limiting** (10 req/min anonymous, 30 req/min authenticated)

### Universal Compatibility üåç
- Works with **any CMS** (WordPress, Shopify, Wix, etc.)
- **Mobile responsive** design
- **Shadow DOM isolation** - zero CSS conflicts
- **All modern browsers** supported

### Technical Stack:
- **Frontend**: React with Shadow DOM encapsulation
- **Backend**: Cloudflare Workers (edge computing)
- **Database**: PostgreSQL with pgvector
- **AI**: OpenAI GPT-4o-mini + embeddings
- **Security**: GDPR compliant with auto data cleanup

Want to know more? Ask about specific technical aspects!`
  ),

  customWidgets: createMessage(
    "assistant",
    `## Custom AI Widgets - Your Knowledge, Your Assistant ü§ñ

Transform your documents into an intelligent AI assistant:

{{component:workflow-steps}}

**What you can upload:**
- üìÑ PDFs and documents
- üñºÔ∏è Images with text (OCR supported)
- üåê Entire websites via crawler
- üìö Multiple files for comprehensive knowledge

**Your AI assistant will:**
- Answer questions from your content
- Provide inline citations [1] [2]
- Offer smart recommendations
- Learn from your specific domain

{{component:cta-button text="Build Your AI Assistant" href="/login?mode=register"}}

It's like having a subject matter expert available 24/7!`
  ),

  howItWorks: createMessage(
    "assistant",
    `## How Websyte AI Works üîß

### For Page-Based Chat:
1. **Add one script tag** to your HTML
2. **Widget reads your content** automatically
3. **AI provides contextual answers** about your page
4. **Visitors get instant help** without leaving

### For Custom Widgets:
{{component:workflow-steps}}

**The magic behind it:**
- **RAG (Retrieval-Augmented Generation)** ensures accurate answers
- **Vector embeddings** for semantic search
- **Smart chunking** preserves context
- **Citation tracking** for transparency

Ask me about specific features or try it yourself!`
  ),

  embedInstructions: createMessage(
    "assistant",
    `## Embedding Made Simple üìù

### Step 1: Copy the Code
For standard page chat:
\`\`\`html
<script src="https://websyte.ai/dist/widget.js" async></script>
\`\`\`

### Step 2: Add to Your Site
- **WordPress**: Use a plugin like "Insert Headers and Footers"
- **Shopify**: Add to theme.liquid
- **Wix**: Use the HTML embed element
- **Static sites**: Add before closing \`</body>\` tag

### Step 3: That's It! 
The widget appears automatically and starts helping visitors.

**Pro tips:**
- Works with any website or CMS
- No configuration needed
- Doesn't affect page speed
- Mobile responsive

Need platform-specific help? Just ask!`
  ),

  embedConfig: createMessage(
    "assistant",
    `## Advanced Embed Configuration üõ†Ô∏è

Customize your widget with data attributes:

### Basic Embed
\`\`\`html
<script src="https://websyte.ai/dist/widget.js" async></script>
\`\`\`

### With Custom Options
\`\`\`html
<script 
  src="https://websyte.ai/dist/widget.js" 
  data-content-target="article, main, .content"
  data-advertiser-name="Your Brand"
  data-advertiser-logo="https://your-logo.png"
  data-target-element="#custom-container"
  data-base-url="https://your-api.com"
  async>
</script>
\`\`\`

### Available Options:
- **data-content-target** - CSS selector for content to analyze
- **data-advertiser-name** - Your brand name in the chat
- **data-advertiser-logo** - URL to your logo
- **data-target-element** - Where to inject the widget
- **data-base-url** - Custom API endpoint
- **data-widget-id** - For custom knowledge base widgets

All options are optional - the widget works great with defaults!`
  ),

  benefits: createMessage(
    "assistant",
    `## Why Your Visitors Will Love This ‚ù§Ô∏è

### The Problem:
- üò§ Visitors can't find what they need
- üìà High bounce rates
- üò¥ Static, non-interactive content
- ‚ùì Unanswered questions

### The Solution:
- üéØ Instant, accurate answers
- üí¨ Natural conversations
- üîç Smart content discovery
- üòä Delighted visitors

**Real results from our users:**
- "Reduced support tickets by 40%"
- "Visitors stay 3x longer on pages"
- "Finally, our docs are actually helpful!"

{{component:cta-button text="Join Thousands of Happy Sites" href="/login?mode=register"}}`
  ),

  apiAutomation: createMessage(
    "assistant",
    `## API & Automation üîå

Websyte AI offers complete programmatic control:

{{component:api-example}}

### Feature Availability:
{{component:feature-availability feature="apiAccess"}}

**Perfect for:**
- üîß CI/CD integration
- üì¶ Bulk widget management
- üîÑ Automated content updates
- üè¢ Enterprise integrations
- üöÄ Custom workflows

**Rate Limits:**
- Anonymous: 10 requests/min
- Authenticated: 30 requests/min
- Enterprise: Contact us for higher limits`
  ),

  competitors: createMessage(
    "assistant",
    `## See Why We're Different üèÜ

{{component:comparison-table}}

**Our advantages:**
- üöÄ **Zero Setup Complexity** - One line, done
- üí∞ **Forever Free** - No surprises, no trials
- üß† **Latest AI** - GPT-4o with RAG technology
- üîì **No Lock-in** - Your data, your control
- üë®‚Äçüíª **Developer First** - Built by devs, for devs

{{component:auth-button action="signup" text="Start Free - See the Difference"}}`
  ),

  help: createMessage(
    "assistant",
    `## How Can I Help You? ü§ù

Here are some things you can ask me:

### üöÄ Getting Started
- "How do I get started?"
- "Show me the embed code"
- "How does it work?"

### üí° Features & Capabilities
- "What features do you have?"
- "Show me a demo"
- "How do custom widgets work?"

### üí∞ Pricing & Plans
- "Is it really free?"
- "What's the catch?"
- "Any limitations?"

### üõ†Ô∏è Technical Details
- "What's your tech stack?"
- "API documentation?"
- "Performance stats?"

### üéØ Use Cases
- "Good for blogs?"
- "E-commerce support?"
- "Documentation sites?"

Or just type your question - I'm here to help!`
  ),

  // Missing sections from original landing page
  whyEngage: createMessage(
    "assistant",
    `## Why Your Visitors Will Actually Stay and Engage üéØ

Stop watching analytics show high bounce rates. Give visitors the smart, instant help they're desperately looking for.

{{component:full-feature-grid}}

**The difference is clear:**
- ‚ùå Without AI: Visitors leave frustrated, can't find answers
- ‚úÖ With Websyte AI: Instant help, happy visitors, longer sessions

Ask me about specific features or see how to get started!`
  ),

  performanceSecurity: createMessage(
    "assistant",
    `## Built for Performance & Security üöÄüîí

Enterprise-grade infrastructure with modern web standards:

{{component:performance-stats}}

**Technical highlights:**
- ‚ö° **~200KB bundle** - Smaller than most images
- üèÉ **<100ms load time** - Instant widget appearance  
- üõ°Ô∏è **Cloudflare Workers** - Global edge computing
- üîê **Rate limiting** - 10/min anonymous, 30/min authenticated
- üìã **GDPR compliant** - Privacy by design
- üßπ **90-day auto cleanup** - Automatic data retention

**Infrastructure:**
- üåç Any website or CMS
- üì± Mobile responsive
- üåê Cross-browser compatible
- üîÑ Zero conflicts guaranteed

Built with ‚ù§Ô∏è using React Router and Cloudflare Workers.`
  ),

  // Contextual responses for specific queries
  wordpress: createMessage(
    "assistant",
    `## Websyte AI + WordPress = ‚ù§Ô∏è

### Easy WordPress Installation:

1. **Using a Plugin:**
   - Install "Insert Headers and Footers" or similar
   - Add our script to the footer section
   - Save and you're done!

2. **Direct Theme Edit:**
   - Go to Appearance ‚Üí Theme Editor
   - Open footer.php
   - Add before \`</body>\`:
   \`\`\`html
   <script src="https://websyte.ai/dist/widget.js" async></script>
   \`\`\`

3. **Using Functions.php:**
   \`\`\`php
   function add_websyte_ai() {
     echo '<script src="https://websyte.ai/dist/widget.js" async></script>';
   }
   add_action('wp_footer', 'add_websyte_ai');
   \`\`\`

**Works great with:**
- WooCommerce stores
- Blog posts
- Documentation
- Landing pages

No conflicts with other plugins guaranteed!`
  ),

  security: createMessage(
    "assistant",
    `## Enterprise-Grade Security üîí

Your data and your visitors' privacy are our top priorities:

### Security Features:
- üîê **Encrypted connections** (TLS 1.3)
- üö´ **Rate limiting** to prevent abuse
- üõ°Ô∏è **GDPR compliant** with configurable data retention
- üßπ **Auto-cleanup** of old messages (90 days)
- üîç **No tracking** beyond basic analytics
- üè¢ **SOC2 compliant** infrastructure (Cloudflare)

### Data Handling:
- Messages stored securely in PostgreSQL
- Optional IP anonymization
- You own your data - export anytime
- Delete widgets and all data instantly
- No data sharing with third parties

### For Your Visitors:
- No cookies required
- No personal data collection
- Anonymous by default
- Transparent privacy policy

{{component:cta-button text="Read Security Docs" href="/docs/security"}}`
  ),

  aboutUs: createMessage(
    "assistant",
    `## About Websyte AI Chat Widget üí¨

**Built with ‚ù§Ô∏è using:**
- ‚öõÔ∏è React Router 7 + Vite
- ‚òÅÔ∏è Cloudflare Workers
- üêò PostgreSQL + Drizzle ORM
- ü§ñ OpenAI GPT-4o-mini
- üîê Better Auth
- üé® Tailwind CSS + shadcn/ui

**Open Source & Community:**
- üìñ MIT License
- üêô GitHub: [websyte/ai-chat-widget](https://github.com/websyte/ai-chat-widget)
- üêõ Report issues: [GitHub Issues](https://github.com/websyte/ai-chat-widget/issues)
- üí° Feature requests welcome!

**Powered by:**
- OpenAI for intelligent responses
- Cloudflare Workers for global edge computing
- Neon PostgreSQL for reliable data storage

Join our community and help shape the future of web engagement!`
  ),

  // Widget workflow message
  widgetWorkflow: createMessage(
    "assistant",
    `## From Documents to Deployed AI in Minutes üöÄ

Upload your knowledge base, generate embed codes, and deploy intelligent AI assistants that answer questions from your specific content.

{{component:workflow-steps}}

{{component:tech-stack}}

Ready to build your custom AI assistant? 
{{component:auth-button action="signup" text="Get Started Free"}}`
  ),
};

// Response matcher to find the best response for a user query
export function findBestResponse(query: string): typeof demoMessages[keyof typeof demoMessages] | null {
  const q = query.toLowerCase();
  
  // Direct matches
  if (q.includes("feature") || q.includes("what can") || q.includes("capabilities")) {
    return demoMessages.features;
  }
  if (q.includes("start") || q.includes("begin") || q.includes("embed") || q.includes("install")) {
    return demoMessages.getStarted;
  }
  if (q.includes("demo") || q.includes("video") || q.includes("see it") || q.includes("watch")) {
    return demoMessages.demo;
  }
  if (q.includes("free") || q.includes("cost") || q.includes("price") || q.includes("pricing")) {
    return demoMessages.pricing;
  }
  if (q.includes("tech") || q.includes("stack") || q.includes("performance") || q.includes("api")) {
    return demoMessages.technical;
  }
  if (q.includes("custom") || q.includes("widget") || q.includes("knowledge")) {
    return demoMessages.customWidgets;
  }
  if (q.includes("work") || q.includes("how does") || q.includes("function")) {
    return demoMessages.howItWorks;
  }
  if (q.includes("config") || q.includes("customize") || q.includes("options")) {
    return demoMessages.embedConfig;
  }
  if (q.includes("wordpress") || q.includes("wp")) {
    return demoMessages.wordpress;
  }
  if (q.includes("security") || q.includes("privacy") || q.includes("gdpr") || q.includes("safe")) {
    return demoMessages.security;
  }
  if (q.includes("help") || q.includes("what can i ask") || q.includes("?")) {
    return demoMessages.help;
  }
  if (q.includes("compar") || q.includes("competitor") || q.includes("vs") || q.includes("better") || q.includes("different")) {
    return demoMessages.competitors;
  }
  if (q.includes("benefit") || q.includes("why use") || q.includes("value")) {
    return demoMessages.benefits;
  }
  if (q.includes("why") && (q.includes("stay") || q.includes("engage"))) {
    return demoMessages.whyEngage;
  }
  if (q.includes("performance") || q.includes("security") || q.includes("infrastructure")) {
    return demoMessages.performanceSecurity;
  }
  if (q.includes("about") || q.includes("who") || q.includes("built") || q.includes("footer")) {
    return demoMessages.aboutUs;
  }
  if (q.includes("workflow") || q.includes("process") || q.includes("document") || q.includes("deploy")) {
    return demoMessages.widgetWorkflow;
  }
  
  // Default to help if no match
  return demoMessages.help;
}

// Demo recommendations that appear in the chat
export const demoRecommendations = [
  {
    title: "Show me the features",
    description: "Explore our powerful AI capabilities"
  },
  {
    title: "How do I get started?",
    description: "Get your embed code in seconds"
  },
  {
    title: "Is it really free?",
    description: "Learn about our forever-free pricing"
  },
  {
    title: "Show me a demo",
    description: "Watch Websyte AI in action"
  },
  {
    title: "How do custom widgets work?",
    description: "Build AI assistants with your content"
  },
  {
    title: "What's your tech stack?",
    description: "See what powers our platform"
  }
];